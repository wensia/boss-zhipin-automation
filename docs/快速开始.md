# Boss 直聘自动化 - 快速开始指南

## 🚀 第一步：启动服务

确保前后端服务正在运行：

```bash
./manage.sh status
```

如果服务未运行，执行：

```bash
./manage.sh start all
```

## 🔐 第二步：登录 Boss 直聘

### 方法 A：通过前端界面（推荐）

1. **打开浏览器访问前端**
   ```bash
   open http://localhost:13601
   ```

2. **进入系统设置页面**
   - 点击左侧导航栏的「系统设置」

3. **点击登录按钮**
   - 在「登录设置」区域点击「登录」按钮
   - 系统会自动打开浏览器窗口

4. **在浏览器中完成登录**
   - 选择登录方式（手机验证码或扫码）
   - ⚠️ **重要**：点击「我要招聘」选项卡（不是「我要找工作」）
   - 完成登录后，等待页面自动跳转到招聘端
   - 看到 URL 变为 `https://www.zhipin.com/web/boss/...` 表示成功
   - 系统会自动保存登录状态到 `backend/boss_auth.json`

5. **验证登录状态**
   - 返回前端界面的「系统设置」页面
   - 查看「登录状态」应显示为「已登录」

### 方法 B：通过命令行测试（开发者选项）

#### 选项 1：使用 Python 直接测试

```bash
cd backend
uv run python test_login.py
```

这个脚本会：
- 打开浏览器并访问 Boss 直聘
- 引导您完成登录
- 自动保存登录状态
- 浏览器会保持打开 30 秒供您查看

#### 选项 2：通过 API 测试

```bash
cd backend
uv run python api_test_login.py
```

这个脚本会：
- 检查后端服务状态
- 通过 API 触发登录流程
- 打开浏览器供您登录
- 验证登录状态并显示结果

## 📝 第三步：创建问候模板

登录成功后，您需要创建问候模板：

### 通过前端界面

1. 点击左侧导航栏的「模板管理」
2. 点击「创建模板」按钮
3. 填写模板信息：
   - **名称**：例如 "Python 开发问候"
   - **内容**：例如
     ```
     你好 {name}，看到你的简历是 {position}，我们公司正在招聘相关职位，
     薪资待遇优厚，工作环境良好，如果你有兴趣可以详细聊聊。
     ```
   - 支持的变量：
     - `{name}` - 候选人姓名
     - `{position}` - 职位名称
     - `{company}` - 公司名称（如果有）

4. 点击「创建」保存模板

### 通过 API 创建

```bash
curl -X POST http://localhost:27421/api/templates \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Python开发问候",
    "content": "你好 {name}，看到你是 {position}，我们有个很好的机会...",
    "is_active": true
  }'
```

## 🤖 第四步：创建并运行自动化任务

### 通过前端界面

1. 点击左侧导航栏的「任务管理」
2. 点击「创建任务」按钮
3. 填写任务参数：
   - **搜索关键词**：例如 "Python开发工程师"
   - **问候模板**：选择刚才创建的模板
   - **最大联系数**：建议从 20 开始
   - **最小延迟**：2 秒
   - **最大延迟**：5 秒

4. 点击「创建」
5. 在任务列表中找到新创建的任务
6. 点击「播放」图标启动任务
7. 系统会自动：
   - 搜索符合条件的候选人
   - 提取候选人信息
   - 发送个性化问候消息
   - 实时更新任务进度

### 通过 API 创建和运行

```bash
# 1. 创建任务
curl -X POST http://localhost:27421/api/automation/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "search_keywords": "Python开发工程师",
    "greeting_template_id": 1,
    "max_contacts": 20,
    "delay_min": 2,
    "delay_max": 5
  }'

# 2. 启动任务（假设任务 ID 为 1）
curl -X POST http://localhost:27421/api/automation/tasks/1/start

# 3. 查看任务进度
curl http://localhost:27421/api/automation/tasks/1
```

## 📊 第五步：监控任务执行

### 查看仪表盘

访问 http://localhost:13601 首页（仪表盘），可以看到：
- 候选人总数和今日新增
- 问候总数和成功率
- 今日已联系数量和剩余配额
- 任务执行统计

### 查看候选人列表

点击「候选人」菜单，可以：
- 查看所有候选人
- 按状态筛选
- 搜索候选人
- 查看问候记录

### 实时监控任务

任务运行时，会实时更新：
- 进度百分比
- 找到的候选人数
- 已联系数
- 成功/失败数

## ⚠️ 重要注意事项

1. **首次使用必须登录**
   - 必须先登录 Boss 直聘才能使用自动化功能
   - 登录时务必选择「我要招聘」（招聘端）

2. **每日限制**
   - 系统默认每日最大联系 100 人
   - 可在「系统设置」中调整
   - 达到限制后会自动停止

3. **反检测设置**
   - 建议启用「反检测模式」
   - 启用「随机延迟」
   - 设置合理的延迟时间（2-5秒）

4. **同时只能运行一个任务**
   - 确保前一个任务完成或暂停后再启动新任务

5. **网络稳定性**
   - 确保网络连接稳定
   - 避免在网络不稳定时运行任务

## 🔍 故障排查

### 问题1：无法登录

**可能原因**：
- 浏览器未正确打开
- 未选择「我要招聘」选项卡
- 登录过程被中断

**解决方法**：
1. 重新点击登录按钮
2. 确保选择「我要招聘」
3. 等待页面完全跳转到招聘端
4. 检查 `backend/boss_auth.json` 是否生成

### 问题2：任务一直是待处理状态

**可能原因**：
- 未登录
- 已有其他任务在运行

**解决方法**：
1. 检查登录状态
2. 查看是否有其他任务正在运行
3. 手动点击「播放」按钮启动任务

### 问题3：发送消息失败

**可能原因**：
- 账号被限制
- 出现验证码
- 候选人已被联系过

**解决方法**：
1. 检查是否触发了验证码（系统会自动检测）
2. 降低操作频率
3. 检查每日限制是否已达到

### 问题4：前端无法访问

**解决方法**：
```bash
# 重启所有服务
./manage.sh restart all

# 查看服务状态
./manage.sh status

# 查看日志
./manage.sh logs all
```

## 📖 更多信息

- **完整使用指南**：`USAGE_GUIDE.md`
- **API 文档**：http://localhost:27421/docs
- **API 参考**：`backend/API_REFERENCE.md`
- **项目初始化**：`PROJECT_INIT.md`

## 💡 快速命令参考

```bash
# 启动所有服务
./manage.sh start all

# 重启服务
./manage.sh restart all

# 查看状态
./manage.sh status

# 查看日志
./manage.sh logs all

# 停止服务
./manage.sh stop all

# 测试登录
cd backend && uv run python test_login.py

# API 测试登录
cd backend && uv run python api_test_login.py
```

## 🎯 推荐工作流

1. 启动服务 → 2. 登录账号 → 3. 创建模板 → 4. 创建任务 → 5. 启动任务 → 6. 监控进度

祝您使用愉快！🎉
