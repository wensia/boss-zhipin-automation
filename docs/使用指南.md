# Boss 直聘自动化系统使用指南

## 系统概述

Boss 直聘自动化系统是一个基于 Playwright 的 Web 自动化工具，用于自动化招聘流程，包括候选人搜索、问候消息发送等功能。

## 技术栈

### 前端
- **框架**: React 19 + TypeScript + Vite
- **UI 库**: shadcn/ui + Tailwind CSS
- **路由**: React Router v6
- **图标**: Lucide React
- **状态管理**: React Hooks

### 后端
- **框架**: FastAPI + Python
- **数据库**: SQLite + SQLModel (异步)
- **浏览器自动化**: Playwright (Chromium)
- **包管理**: uv

## 快速开始

### 1. 启动系统

使用管理脚本启动所有服务：

```bash
# 启动所有服务（前端 + 后端）
./manage.sh start all

# 或分别启动
./manage.sh start frontend  # 前端：http://localhost:13601
./manage.sh start backend   # 后端：http://localhost:27421
```

### 2. 访问系统

打开浏览器访问：`http://localhost:13601`

### 3. 初次使用配置

#### 步骤 1：登录 Boss 直聘

1. 进入「系统设置」页面
2. 点击「登录」按钮
3. 系统会自动打开浏览器窗口
4. 在浏览器中完成 Boss 直聘登录
5. **重要**: 选择「我要招聘」选项卡（招聘端）
6. 等待页面跳转到 `/web/boss/` 开头的 URL
7. 登录状态会自动保存

#### 步骤 2：创建问候模板

1. 进入「模板管理」页面
2. 点击「创建模板」
3. 填写模板信息：
   - **模板名称**: 例如 "通用问候"
   - **模板内容**: 支持变量替换
     - `{name}` - 候选人姓名
     - `{position}` - 职位
     - `{company}` - 公司（可选）
   - 示例：`你好 {name}，看到你是 {position}，我们这里有一个很好的机会...`
4. 确保模板状态为「已启用」

#### 步骤 3：创建自动化任务

1. 进入「任务管理」页面
2. 点击「创建任务」
3. 填写任务参数：
   - **搜索关键词**: 例如 "Python开发工程师"
   - **问候模板**: 选择之前创建的模板
   - **最大联系数**: 建议 20-50
   - **延迟设置**:
     - 最小延迟：2 秒
     - 最大延迟：5 秒
4. 点击「创建」

#### 步骤 4：启动任务

1. 在任务列表中找到创建的任务
2. 点击「播放」图标启动任务
3. 系统会自动：
   - 搜索符合条件的候选人
   - 向每个候选人发送个性化问候
   - 实时更新任务进度
   - 记录成功/失败状态

## 主要功能

### 1. 仪表盘 (Dashboard)

查看系统整体运行状态：
- 候选人总数和今日新增
- 问候总数和成功率
- 今日联系数和剩余配额
- 任务统计信息
- 系统配置状态

### 2. 任务管理 (Tasks)

管理自动化任务：
- 创建新任务
- 查看任务列表和进度
- 启动/暂停/取消任务
- 删除已完成的任务
- 实时监控任务状态

任务状态说明：
- **待处理**: 任务已创建，等待启动
- **运行中**: 任务正在执行
- **已暂停**: 任务被手动暂停
- **已完成**: 任务成功完成
- **失败**: 任务执行失败
- **已取消**: 任务被手动取消

### 3. 候选人管理 (Candidates)

查看和管理候选人：
- 查看所有候选人列表
- 搜索候选人（姓名、职位、公司）
- 按状态筛选
- 查看候选人详细信息

候选人状态：
- **新候选人**: 刚添加的候选人
- **已联系**: 已发送问候消息
- **已回复**: 候选人有回复
- **感兴趣**: 候选人表示感兴趣
- **已拒绝**: 候选人拒绝
- **已归档**: 已归档的候选人

### 4. 模板管理 (Templates)

管理问候消息模板：
- 创建新模板
- 编辑现有模板
- 启用/禁用模板
- 复制模板
- 删除模板
- 查看模板使用次数

模板变量说明：
- `{name}`: 自动替换为候选人姓名
- `{position}`: 自动替换为候选人职位
- `{company}`: 自动替换为候选人公司（如果有）

### 5. 系统设置 (Settings)

配置系统参数：

#### 登录设置
- 登录 Boss 直聘账号
- 查看登录状态
- 清除登录信息

#### 自动化设置
- **自动模式**: 启用后系统自动执行任务
- **反检测模式**: 隐藏自动化特征，避免被识别为机器人
- **随机延迟**: 在操作之间添加随机延迟，模拟人类行为

#### 限制设置
- **每日最大联系数**: 默认 100，防止过度操作
- **休息间隔**: 每隔多少分钟休息一次（默认 15 分钟）
- **休息时长**: 每次休息的时长（默认 60 秒）

## 安全和反检测

系统内置多项反检测功能：

1. **隐藏自动化特征**:
   - 隐藏 webdriver 标志
   - 伪造浏览器插件
   - 伪造语言设置

2. **随机延迟**:
   - 操作间随机等待时间
   - 模拟人类鼠标移动
   - 模拟页面滚动

3. **智能休息**:
   - 定期休息避免连续操作
   - 随机休息时长

4. **每日限制**:
   - 限制每日最大联系数
   - 自动跟踪已联系数量
   - 达到限制后自动停止

## API 文档

后端提供完整的 REST API：

- **Swagger UI**: http://localhost:27421/docs
- **ReDoc**: http://localhost:27421/redoc
- **API 参考**: 查看 `backend/API_REFERENCE.md`

## 常见问题

### Q1: 登录后无法保持登录状态？

**A**: 确保：
1. 登录时选择了「我要招聘」选项卡
2. 等待页面完全跳转到招聘端（URL 包含 `/web/boss/`）
3. 不要在登录过程中关闭浏览器
4. 检查 `backend/boss_auth.json` 文件是否存在

### Q2: 任务一直处于待处理状态？

**A**: 可能原因：
1. 未登录 Boss 直聘账号
2. 已有其他任务在运行（同时只能运行一个任务）
3. 手动点击「播放」按钮启动任务

### Q3: 发送消息失败？

**A**: 可能原因：
1. 账号被限制（操作过于频繁）
2. 出现验证码
3. 候选人已被联系过
4. 网络连接问题

### Q4: 如何提高成功率？

**A**: 建议：
1. 启用反检测模式
2. 启用随机延迟
3. 设置合理的延迟时间（2-5秒）
4. 不要设置过大的每日限制
5. 定期休息（15分钟休息一次）
6. 避免深夜或凌晨操作

### Q5: 如何停止所有服务？

**A**: 使用管理脚本：
```bash
./manage.sh stop all
```

## 数据存储

所有数据存储在 SQLite 数据库中：
- **位置**: `backend/database.db`
- **包含**: 候选人、问候记录、任务、模板、系统配置

登录状态保存在：
- **位置**: `backend/boss_auth.json`

## 日志查看

查看系统日志：

```bash
# 查看前端日志
./manage.sh logs frontend

# 查看后端日志
./manage.sh logs backend

# 查看所有日志
./manage.sh logs all
```

日志文件位置：
- 前端：`logs/frontend.log`
- 后端：`logs/backend.log`

## 服务管理

```bash
# 启动服务
./manage.sh start [frontend|backend|all]

# 停止服务
./manage.sh stop [frontend|backend|all]

# 重启服务
./manage.sh restart [frontend|backend|all]

# 查看状态
./manage.sh status

# 查看日志
./manage.sh logs [frontend|backend|all]
```

## 注意事项

1. **合法使用**: 仅用于正常招聘目的，不要滥用
2. **频率控制**: 建议每日联系数不超过 100
3. **内容合规**: 确保问候消息内容合规，不要发送垃圾信息
4. **账号安全**: 妥善保管登录状态文件
5. **定期维护**: 定期清理旧数据，避免数据库过大

## 技术支持

如遇问题，请：
1. 查看日志文件
2. 检查后端 API 文档
3. 查看 `backend/API_REFERENCE.md`
4. 查看 `PROJECT_INIT.md` 了解项目结构

## 项目结构

```
.
├── frontend/                  # 前端项目
│   ├── src/
│   │   ├── components/       # UI 组件
│   │   ├── hooks/           # React Hooks
│   │   ├── lib/             # 工具函数
│   │   ├── pages/           # 页面组件
│   │   └── types/           # TypeScript 类型
│   └── dist/                # 构建输出
│
├── backend/                  # 后端项目
│   ├── app/
│   │   ├── models/          # 数据模型
│   │   ├── routes/          # API 路由
│   │   └── services/        # 业务逻辑
│   ├── database.db          # SQLite 数据库
│   └── boss_auth.json       # 登录状态
│
├── manage.sh                # 管理脚本
├── .ports                   # 端口配置
└── logs/                    # 日志目录
```

## 版本信息

- **当前版本**: v1.0.0
- **前端端口**: 13601
- **后端端口**: 27421
- **Python 版本**: 3.10+
- **Node 版本**: 20+

## 更新日志

### v1.0.0 (2025-10-28)
- 初始版本发布
- 实现基础自动化功能
- 完整的前后端分离架构
- 反检测和安全功能
- 完整的 UI 界面
