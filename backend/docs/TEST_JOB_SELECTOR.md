# 职位选择器调试指南

## 问题描述

前端显示"未找到职位选择器触发器"，需要找到正确的点击和获取 li 的逻辑。

## 🧪 运行交互式测试

这个测试脚本会：
- ✅ 显示浏览器窗口（可以实时观察）
- ✅ 检查所有可能的选择器
- ✅ 实际点击职位选择器
- ✅ 检查下拉菜单是否出现
- ✅ 获取所有 li 元素的详细信息
- ✅ 保存多个阶段的截图
- ✅ 保持浏览器打开 60 秒供手动检查

### 运行命令

```bash
cd backend
python test_job_selector_interactive.py
```

## 📸 查看截图

测试完成后，所有截图会保存在 `backend/screenshots/` 目录：

- `01_recommend_page_initial.png` - 推荐页面初始状态
- `02_no_selector_found.png` - 如果未找到选择器
- `03_before_click.png` - 点击职位选择器前
- `04_after_click.png` - 点击职位选择器后
- `05_no_dropdown_found.png` - 如果未找到下拉列表
- `06_dropdown_list.png` - 展开的下拉列表
- `99_error_screenshot.png` - 如果出错

## 📋 查看日志

测试脚本会输出详细的日志信息：

```
📍 步骤 1: 初始化浏览器
✅ 浏览器初始化成功

📍 步骤 2: 检查登录状态
✅ 已登录

📍 步骤 3: 导航到推荐页面
✅ 当前URL: https://...

📍 步骤 4: 检查页面元素
#headerWrap 存在: True
选择器 '...' 存在: True/False
...

📍 步骤 5: 点击职位选择器
✅ 找到职位选择器: ...
👆 点击职位选择器...

📍 步骤 6: 查找下拉列表
✅ 找到下拉列表: ...

📍 步骤 7: 获取职位列表
📋 找到 X 个 li 元素

--- li 元素 1 ---
<li data-v-11890623="" value="xxx" class="job-item">...
value: xxx
class: job-item
text: 主播（五险一金/月入过万...
```

## 🔍 关键信息

测试脚本会帮你找到：

1. **正确的触发器选择器** - 哪个选择器能找到职位选择器按钮
2. **正确的列表选择器** - 哪个选择器能找到下拉列表
3. **li 元素的结构** - li 元素有哪些属性和类名
4. **value 属性的格式** - 职位的 value 属性是什么样的
5. **文本内容的位置** - 职位名称在哪个元素中

## 💡 如果测试失败

### 情况 1: 未找到职位选择器

检查日志中的 `headerWrap HTML` 输出，看看实际的 HTML 结构是什么。

### 情况 2: 点击后下拉菜单未出现

查看 `04_after_click.png` 截图，看看点击后页面发生了什么变化。

### 情况 3: 未找到下拉列表

检查日志中的 `job-selecter-wrap HTML (点击后)` 输出，看看下拉菜单的实际结构。

## 🔧 下一步

根据测试结果，我们会：

1. 找到正确的选择器
2. 更新 `get_available_jobs()` 方法
3. 重启后端服务器
4. 在前端重新测试

## 📞 需要的信息

测试完成后，请提供：

1. **完整的终端输出** - 特别是日志部分
2. **截图文件** - 特别是 `04_after_click.png` 和 `06_dropdown_list.png`
3. **任何错误消息**

这些信息将帮助我们找到正确的实现方式。
